<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Farmhouse Coffee</title>
  <meta name="description" content="Warm coffee. Small-town comfort. A place to slow down and feel at home." />
  <link rel="icon" href="./favicon.PNG" />
  <link rel="stylesheet" href="./styles.css" />
</head>

<body>
  <div class="bg-fixed" aria-hidden="true"></div>
  <a class="skip" href="#content">Skip to content</a>

  <main id="content" class="wrap">
    <!-- HERO -->
    <section class="hero" aria-label="Farmhouse Coffee">
      <div class="hero__media" role="img" aria-label="Farmhouse Coffee hero image"></div>

      <div class="hero__panel">
        <img class="hero__logo" src="./logo.PNG" alt="Farmhouse Coffee logo" onerror="this.style.display='none';" />

        <p class="hero__desc">
          Warm coffee. Small-town comfort. A place to slow down and feel at home.
        </p>

        <div class="hero__cta" role="group" aria-label="Primary actions">
          <button class="btn btn--primary" type="button" data-open="menu">Menu</button>
          <button class="btn" type="button" data-open="hours">Hours</button>
          <a class="btn" href="./order.html" aria-label="Order (pickup)">Order</a>
        </div>

        <div class="hero__meta" aria-label="Social links">
          <a class="socialBtn" href="https://instagram.com" target="_blank" rel="noopener" aria-label="Instagram">
            <img src="./instagram.PNG" alt="" />
          </a>
          <a class="socialBtn" href="https://facebook.com" target="_blank" rel="noopener" aria-label="Facebook">
            <img src="./facebook.PNG" alt="" />
          </a>
          <a class="socialBtn" href="https://tiktok.com" target="_blank" rel="noopener" aria-label="TikTok">
            <img src="./tiktok.PNG" alt="" />
          </a>
        </div>
      </div>
    </section>

    <!-- HOURS BANNER (FULL WIDTH, NO CROP) -->
    <section class="hoursBanner" aria-label="Hours banner">
      <img class="hoursBanner__img" src="./hours-panel.PNG" alt="Hours" loading="lazy" />
    </section>

    <!-- TILES GRID (2 columns) -->
    <section class="grid" aria-label="Slides + image tiles">

      <!-- SLOT 1: Carousel (beanslide) -->
      <div class="card carousel" data-carousel="beanslide" aria-label="Bean Slide carousel">
        <div class="carousel__viewport" tabindex="0" aria-label="Tap or swipe slides">
          <div class="carousel__track">
            <img class="carousel__img" src="./beanslide/coff-1.jpg" alt="" loading="lazy">
            <img class="carousel__img" src="./beanslide/coff-2.jpg" alt="" loading="lazy">
            <img class="carousel__img" src="./beanslide/coff-3.jpg" alt="" loading="lazy">
            <img class="carousel__img" src="./beanslide/coff-4.jpg" alt="" loading="lazy">
            <img class="carousel__img" src="./beanslide/coff-5.jpg" alt="" loading="lazy">
            <img class="carousel__img" src="./beanslide/coff-6.jpg" alt="" loading="lazy">
          </div>
        </div>
        <div class="dots" aria-hidden="true"></div>
      </div>

      <!-- SLOT 2: Carousel (beanstory) -->
      <div class="card carousel" data-carousel="beanstory" aria-label="Bean Story carousel">
        <div class="carousel__viewport" tabindex="0" aria-label="Tap or swipe slides">
          <div class="carousel__track">
            <img class="carousel__img" src="./beanstory/cbs-1.jpg" alt="" loading="lazy">
            <img class="carousel__img" src="./beanstory/cbs-2.jpg" alt="" loading="lazy">
            <img class="carousel__img" src="./beanstory/cbs-3.jpg" alt="" loading="lazy">
            <img class="carousel__img" src="./beanstory/cbs-4.jpg" alt="" loading="lazy">
            <img class="carousel__img" src="./beanstory/cbs-5.jpg" alt="" loading="lazy">
            <img class="carousel__img" src="./beanstory/cbs-6.jpg" alt="" loading="lazy">
          </div>
        </div>
        <div class="dots" aria-hidden="true"></div>
      </div>

      <!-- Image tiles (tiles folder ONLY) — images only, no text -->
      <button class="card tile" type="button" data-tile="menu" aria-label="Open menu">
        <img class="tile__img" src="./tiles/menu.jpg" alt="" loading="lazy" />
      </button>

      <a class="card tile" href="./order.html" aria-label="Order (pickup)">
        <img class="tile__img" src="./tiles/counter.jpg" alt="" loading="lazy" />
      </a>

      <button class="card tile" type="button" aria-label="Coffee image">
        <img class="tile__img" src="./tiles/r-s-coffee.jpg" alt="" loading="lazy" />
      </button>

      <button class="card tile" type="button" aria-label="Espresso image">
        <img class="tile__img" src="./tiles/espresso.jpg" alt="" loading="lazy" />
      </button>

      <button class="card tile" type="button" aria-label="Farmhouse image">
        <img class="tile__img" src="./tiles/fh-mc.jpg" alt="" loading="lazy" />
      </button>

    </section>
  </main>

  <!-- MODAL -->
  <div class="modal" hidden aria-hidden="true">
    <div class="modal__backdrop" data-close></div>

    <section class="modal__sheet" role="dialog" aria-modal="true" aria-labelledby="modalTitle">
      <header class="modal__head">
        <div id="modalTitle" class="modal__title">Menu</div>
        <button class="modal__close" type="button" data-close aria-label="Close">✕</button>
      </header>

      <div class="modal__body" id="modalBody"></div>
    </section>
  </div>

  <script src="./app.js"></script>

  <!-- tiny inline script: swipe + dots + TAP-TO-ADVANCE (no external libs) -->
  <script>
  (() => {
    "use strict";

    const clamp = (n, a, b) => Math.max(a, Math.min(b, n));

    function initCarousel(root){
      const viewport = root.querySelector(".carousel__viewport");
      const track = root.querySelector(".carousel__track");
      const imgs = Array.from(root.querySelectorAll(".carousel__img"));
      const dots = root.querySelector(".dots");
      if (!viewport || !track || imgs.length === 0 || !dots) return;

      // Build dots
      dots.innerHTML = "";
      const dotEls = imgs.map((_, i) => {
        const d = document.createElement("button");
        d.type = "button";
        d.className = "dot";
        d.setAttribute("aria-label", `Slide ${i+1}`);
        d.addEventListener("click", () => {
          viewport.scrollTo({ left: viewport.clientWidth * i, behavior: "smooth" });
        });
        dots.appendChild(d);
        return d;
      });

      const getIndex = () =>
        clamp(Math.round(viewport.scrollLeft / viewport.clientWidth), 0, imgs.length - 1);

      const go = (idx) => {
        idx = clamp(idx, 0, imgs.length - 1);
        viewport.scrollTo({ left: viewport.clientWidth * idx, behavior: "smooth" });
      };

      const setActive = () => {
        const idx = getIndex();
        dotEls.forEach((d, i) => d.classList.toggle("is-active", i === idx));
      };

      viewport.addEventListener("scroll", () => requestAnimationFrame(setActive), { passive: true });
      window.addEventListener("resize", setActive);
      setActive();

      // Tap-to-advance (left = prev, right = next)
      viewport.addEventListener("click", (e) => {
        // If user clicked a dot, let the dot handler win.
        if (e.target && (e.target.classList?.contains("dot") || e.target.closest?.(".dots"))) return;

        const r = viewport.getBoundingClientRect();
        const x = e.clientX - r.left;
        const idx = getIndex();
        if (x < r.width * 0.5) go(idx - 1);
        else go(idx + 1);
      });

      // Drag / swipe support (mouse + touch)
      let isDown = false;
      let startX = 0;
      let startLeft = 0;

      const getX = (e) => (e.touches ? e.touches[0].clientX : e.clientX);

      const down = (e) => {
        isDown = true;
        startX = getX(e);
        startLeft = viewport.scrollLeft;
        viewport.classList.add("is-dragging");
      };

      const move = (e) => {
        if (!isDown) return;
        const x = getX(e);
        const dx = startX - x;
        viewport.scrollLeft = startLeft + dx;
      };

      const up = () => {
        if (!isDown) return;
        isDown = false;
        viewport.classList.remove("is-dragging");
        go(getIndex());
      };

      viewport.addEventListener("mousedown", down);
      window.addEventListener("mousemove", move);
      window.addEventListener("mouseup", up);

      viewport.addEventListener("touchstart", down, { passive: true });
      viewport.addEventListener("touchmove", move, { passive: true });
      viewport.addEventListener("touchend", up);
      viewport.addEventListener("touchcancel", up);
    }

    document.querySelectorAll(".carousel").forEach(initCarousel);
  })();
  </script>
</body>
</html>